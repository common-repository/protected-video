(()=>{"use strict";var e,t={457:()=>{const e=window.wp.blocks,t=window.React,i=window.wp.i18n,o=window.wp.blockEditor,r=window.wp.components,n=(0,t.createElement)(r.SVG,{viewBox:"0 0 363 512",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(r.Path,{d:"M181.333 0C104.789.094 42.76 62.122 42.666 138.667V224c0 5.891 4.776 10.667 10.667 10.667H96c5.891 0 10.667-4.776 10.667-10.667v-85.333C106.666 97.429 140.096 64 181.333 64 222.57 64 256 97.429 256 138.667V224c0 5.891 4.776 10.667 10.667 10.667h42.666c5.891 0 10.667-4.776 10.667-10.667v-85.333C319.906 62.122 257.877.094 181.333 0Z",fill:"#455a64"}),(0,t.createElement)(r.Path,{d:"M53.333 213.333h256c29.455 0 53.333 23.878 53.333 53.333v192c0 29.456-23.878 53.334-53.333 53.334h-256C23.878 512 0 488.122 0 458.667v-192c0-29.456 23.878-53.334 53.333-53.334Z",fill:"#ffc107"}),(0,t.createElement)(r.Path,{d:"M134.156 277.687v170.997l134.354-85.499-134.354-85.498Z",fill:"#455a64"}));function c(e){return e.includes("?")&&(e=e.split("?")[0]),e.includes("/")&&(e=e.split("/")[0]),e.includes("&")&&(e=e.split("&")[0]),e}function s(e){let t=e;t=t.replace("-nocookie",""),t=t.replace(/#t=.*$/,""),t=t.replace(/^https?:\/\//,"");const i=/youtube:\/\/|youtu\.be\/|y2u\.be\//g;if(i.test(t))return c(t.split(i)[1]);const o=/\/shorts\//g;if(o.test(t))return c(t.split(o)[1]);const r=/v=|vi=/g;if(r.test(t))return c(t.split(r)[1].split("&")[0]);const n=/\/v\/|\/vi\/|\/watch\//g;if(n.test(t))return c(t.split(n)[1]);const s=/\/an_webp\//g;if(s.test(t))return c(t.split(s)[1]);const d=/\/e\//g;if(d.test(t))return c(t.split(d)[1]);const l=/\/embed\//g;if(l.test(t))return c(t.split(l)[1]);if(/\/user\/([a-zA-Z\d]*)$/g.test(t))return;if(/\/user\/(?!.*videos)/g.test(t))return c(t.split("/").pop());const a=/\/attribution_link\?.*v%3D([^%&]*)(%26|&|$)/;if(a.test(t))return c(t.match(a)[1]);const u=/\/live\//g;return u.test(t)?c(t.split(u)[1]):void 0}function d(e){let t,i,o=e;o.includes("#")&&([o]=o.split("#")),o.includes("?")&&!o.includes("clip_id=")&&([o]=o.split("?"));const r=/https?:\/\/vimeo\.com\/event\/(\d+)$/.exec(o);if(r&&r[1])return r[1];const n=/https?:\/\/vimeo\.com\/(\d+)/.exec(o);if(n&&n[1])return n[1];const c=["https?://player.vimeo.com/video/[0-9]+$","https?://vimeo.com/channels","groups","album"].join("|");return new RegExp(c,"gim").test(o)?(i=o.split("/"),i&&i.length>0&&(t=i.pop())):/clip_id=/gim.test(o)&&(i=o.split("clip_id="),i&&i.length>0&&([t]=i[1].split("&"))),t}function l(e){const t=/https:\/\/vine\.co\/v\/([a-zA-Z\d]*)\/?/.exec(e);if(t&&t.length>1)return t[1]}function a(e){let t;if(e.includes("embed"))return t=/embed\/(\w{8})/,e.match(t)[1];t=/\/v\/(\w{8})/;const i=e.match(t);return i&&i.length>0?i[1]:void 0}function u(e){const t=(e.includes("embed")?/https:\/\/web\.microsoftstream\.com\/embed\/video\/([a-zA-Z\d-]*)\/?/:/https:\/\/web\.microsoftstream\.com\/video\/([a-zA-Z\d-]*)\/?/).exec(e);if(t&&t.length>1)return t[1]}function p(e){const t=/tiktok\.com(.*)\/video\/(\d+)/gm.exec(e);if(t&&t.length>2)return t[2]}function v(e){const t=/dailymotion\.com(.*)(video)\/([a-zA-Z\d]+)/gm.exec(e);if(t)return t[3];const i=/dai\.ly\/([a-zA-Z\d]+)/gm.exec(e);if(i&&i.length>1)return i[1];const o=/dailymotion\.com(.*)video=([a-zA-Z\d]+)/gm.exec(e);return o&&o.length>2?o[2]:void 0}function m(e){const t=/^https?:\/\/(?:www\.)?loom\.com\/(?:share|embed)\/([\da-zA-Z]+)\/?/.exec(e);if(t&&t.length>1)return t[1]}function f(e){if("string"!=typeof e)throw new TypeError("get-video-id expects a string");const t=function(e){if("string"!=typeof e)throw new TypeError("extractGoogleRedirectionUrl expected a string, got "+typeof e);const t=e.trim();if(/\/\/google|www\.google/.test(t))try{const t=new URL(e),i=new URLSearchParams(t.search).get("url");if(i)return decodeURIComponent(i)}catch{return t}return t}(function(e){if("string"!=typeof e)throw new TypeError("sanitizeUrl expected a string, got "+typeof e);let t=e;return/<iframe/gi.test(t)&&(t=function(e){if("string"!=typeof e)throw new TypeError("getSrc expected a string");const t=/src="(.*?)"/gm.exec(e);if(t&&t.length>=2)return t[1]}(t)||""),t=t.trim(),t=t.replace("/www.","/"),t}(e));let i={id:void 0,service:void 0};return/youtube|youtu\.be|y2u\.be|i.ytimg\./.test(t)?i={id:s(t),service:"youtube"}:/vimeo/.test(t)?i={id:d(t),service:"vimeo"}:/vine/.test(t)?i={id:l(t),service:"vine"}:/videopress/.test(t)?i={id:a(t),service:"videopress"}:/microsoftstream/.test(t)?i={id:u(t),service:"microsoftstream"}:/tiktok\.com/.test(t)?i={id:p(t),service:"tiktok"}:/(dailymotion\.com|dai\.ly)/.test(t)?i={id:v(t),service:"dailymotion"}:/loom\.com/.test(t)&&(i={id:m(t),service:"loom"}),i}const g=JSON.parse('{"UU":"protected-video/protected-video"}');(0,e.registerBlockType)(g.UU,{icon:n,edit:function({attributes:e,setAttributes:c}){const{videoUrl:s,videoId:d,videoService:l}=e;return(0,t.createElement)("div",{...(0,o.useBlockProps)()},(0,t.createElement)(r.Placeholder,{icon:(0,t.createElement)(o.BlockIcon,{icon:n}),label:(0,i.__)("Protected Video","protected-video"),instructions:(0,i.__)("Paste the URL of a YouTube or Vimeo video you want to display in a protected player.","protected-video")},(0,t.createElement)(r.TextControl,{label:(0,i.__)("Video URL","protected-video"),value:s,onChange:function(e){const{id:t,service:i}=f(e);c({videoUrl:e,videoId:t,videoService:i})},placeholder:(0,i.__)("e.g. https://youtu.be/aqz-KE-bpKQ","protected-video")}),s&&(0,t.createElement)("div",null,d?function(){const e={youtube:`https://i.ytimg.com/vi/${d}/mqdefault.jpg`,vimeo:`https://vumbnail.com/${d}.jpg`};return(0,t.createElement)("img",{src:e[l],width:"320",height:"180",alt:(0,i.__)("Video thumbnail","protected-video")})}():(0,t.createElement)(r.Notice,{status:"error",isDismissible:!1},(0,i.__)("Sorry, a video ID could not be found in that URL.","protected-video")))))},save:function({attributes:e}){const{videoId:i,videoService:r}=e;return(0,t.createElement)("div",{...o.useBlockProps.save(),"data-id1":btoa(r),"data-id2":btoa(i)})}})}},i={};function o(e){var r=i[e];if(void 0!==r)return r.exports;var n=i[e]={exports:{}};return t[e](n,n.exports,o),n.exports}o.m=t,e=[],o.O=(t,i,r,n)=>{if(!i){var c=1/0;for(a=0;a<e.length;a++){for(var[i,r,n]=e[a],s=!0,d=0;d<i.length;d++)(!1&n||c>=n)&&Object.keys(o.O).every((e=>o.O[e](i[d])))?i.splice(d--,1):(s=!1,n<c&&(c=n));if(s){e.splice(a--,1);var l=r();void 0!==l&&(t=l)}}return t}n=n||0;for(var a=e.length;a>0&&e[a-1][2]>n;a--)e[a]=e[a-1];e[a]=[i,r,n]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};o.O.j=t=>0===e[t];var t=(t,i)=>{var r,n,[c,s,d]=i,l=0;if(c.some((t=>0!==e[t]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(d)var a=d(o)}for(t&&t(i);l<c.length;l++)n=c[l],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(a)},i=globalThis.webpackChunkprotected_video=globalThis.webpackChunkprotected_video||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var r=o.O(void 0,[350],(()=>o(457)));r=o.O(r)})();